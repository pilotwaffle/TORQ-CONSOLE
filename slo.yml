# TORQ Console Service Level Objectives (SLOs)
# Performance targets for different operation categories

# Global SLO configuration
version: "1.0"
description: "TORQ Console Performance SLOs"
last_updated: "2025-01-14"

# Benchmark categories with their SLOs
categories:
  # Interactive operations - user-facing actions requiring fast response
  interactive:
    description: "User-facing interactive operations"
    p95_ttfuo_ms: 2500      # 95th percentile Time to First Useful Output
    p99_ttfuo_ms: 5000      # 99th percentile Time to First Useful Output
    p90_response_ms: 2000   # 90th percentile initial response
    success_rate: 0.95      # 95% success rate
    max_memory_mb: 1024     # Maximum memory usage
    sample_size: 100        # Minimum sample size for validity

  # Tool-heavy operations - complex workflows with external tool usage
  tool_heavy:
    description: "Complex operations involving multiple tool calls"
    p95_e2e_ms: 30000      # 95th percentile End-to-End execution time
    p99_e2e_ms: 60000      # 99th percentile End-to-End execution time
    p95_ttfuo_ms: 15000    # 95th percentile Time to First Useful Output
    success_rate: 0.90      # 90% success rate
    max_memory_mb: 2048    # Maximum memory usage
    sample_size: 50         # Minimum sample size for validity

  # Code generation operations - code creation and modification
  code_gen:
    description: "Code generation and modification operations"
    p95_e2e_ms: 15000      # 95th percentile End-to-End execution time
    p99_e2e_ms: 30000      # 99th percentile End-to-End execution time
    p95_ttfuo_ms: 8000     # 95th percentile Time to First Useful Output
    tokens_per_sec: 10     # Minimum tokens per second
    success_rate: 0.92      # 92% success rate
    max_memory_mb: 1536    # Maximum memory usage
    sample_size: 75        # Minimum sample size for validity

  # Search operations - information retrieval and analysis
  search:
    description: "Information search and retrieval operations"
    p95_e2e_ms: 12000      # 95th percentile End-to-End execution time
    p99_e2e_ms: 20000      # 99th percentile End-to-End execution time
    p95_ttfuo_ms: 5000     # 95th percentile Time to First Useful Output
    success_rate: 0.94      # 94% success rate
    max_memory_mb: 768     # Maximum memory usage
    sample_size: 80        # Minimum sample size for validity

# Performance thresholds and alerting
thresholds:
  # Performance degradation alerts
  degradation_warning: 10  # 10% degradation triggers warning
  degradation_critical: 25  # 25% degradation triggers critical alert

  # Cost thresholds
  max_cost_per_success: 0.10  # Maximum cost per successful operation ($)
  cost_increase_warning: 20   # 20% cost increase triggers warning

  # Regression detection
  regression_window: 7       # Days to look back for regression detection
  min_samples_for_regression: 30  # Minimum samples for regression analysis

# Benchmark configuration
benchmark:
  # Default benchmark settings
  default_duration: 300      # Default benchmark duration in seconds
  warmup_iterations: 5       # Number of warmup iterations
  max_iterations: 1000       # Maximum iterations to run
  timeout_ms: 120000         # Individual operation timeout (2 minutes)

  # Concurrency settings
  concurrent_users: 1        # Default concurrent users
  max_concurrent_users: 10   # Maximum concurrent users for load testing

  # Output and reporting
  output_format: "json"      # Default output format (json, table, csv)
  include_percentiles: [50, 90, 95, 99]  # Percentiles to calculate
  include_detailed_breakdown: true  # Include detailed timing breakdown

# Environment-specific SLOs
environments:
  development:
    slack_factor: 2.0        # Allow 2x slower in development
    sample_size_multiplier: 0.5  # Reduce sample size for faster testing

  staging:
    slack_factor: 1.5        # Allow 1.5x slower in staging
    sample_size_multiplier: 0.8

  production:
    slack_factor: 1.0        # No slack in production
    sample_size_multiplier: 1.0